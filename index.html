<!DOCTYPE html>
<html>
<head>
  <title>My Trading Indicator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  <style>
    canvas { border: 2px solid #fff; } /* Thicker border for contrast */
  </style>
</head>
<body>
  <h1 style="color: #fff; background: #000; padding: 10px;">My Web-Based Trading Indicator</h1>
  <script>
    let data = [
      { time: 9, price: 3.394 },
      { time: 10, price: 3.388 },
      { time: 11, price: 3.382 },
      { time: 12, price: 3.378 },
      { time: 13, price: 3.384 },
      { time: 14, price: 3.392 },
      { time: 15, price: 3.405 }
    ];

    function setup() {
      createCanvas(400, 300);
      pixelDensity(2); // Double pixel density for sharper rendering
      background(0); // Black background
      textSize(14); // Increase default font size
      textFont('sans-serif'); // Use a clear font
    }

    function draw() {
      // Clear background each frame to avoid overlap
      background(0);

      // Draw X-axis (time) with thicker lines
      stroke(255); // White
      strokeWeight(2); // Thicker lines
      line(50, 250, 350, 250);
      for (let t = 9; t <= 15; t++) {
        let x = map(t, 9, 15, 50, 350);
        text(t + ":00", x - 15, 265); // Larger text, adjusted position
      }

      // Draw Y-axis (price) with thicker lines
      line(50, 50, 50, 250);
      for (let p = 3.37; p <= 3.41; p += 0.01) {
        let y = map(p, 3.41, 3.37, 50, 250);
        if (p % 0.02 === 0) text(p.toFixed(2), 30, y + 5); // Larger text
      }

      // Draw candlesticks with thicker outlines
      strokeWeight(2);
      data.forEach((d, i) => {
        let x = map(d.time, 9, 15, 50, 350);
        let yOpen = map(d.price, 3.41, 3.37, 50, 250);
        let yClose = map(data[i + 1] ? data[i + 1].price : d.price, 3.41, 3.37, 50, 250);
        let yHigh = map(Math.max(d.price, data[i + 1] ? data[i + 1].price : d.price), 3.41, 3.37, 50, 250);
        let yLow = map(Math.min(d.price, data[i + 1] ? data[i + 1].price : d.price), 3.41, 3.37, 50, 250);

        stroke(255, 0, 0); // Bright red outline
        let isUp = d.price < (data[i + 1] ? data[i + 1].price : d.price);
        fill(isUp ? [0, 200, 0] : [200, 0, 0]); // Brighter green and red
        line(x, yHigh, x, yLow); // Wick
        if (yClose !== yOpen) {
          rect(x - 10, min(yOpen, yClose), 20, abs(yOpen - yClose)); // Wider bars
        }
      });

      // Draw Fibonacci levels with thicker lines
      strokeWeight(2);
      stroke(150, 0, 150); // Brighter purple
      let swingHigh = 3.405;
      let swingLow = 3.378;
      let range = swingHigh - swingLow;
      let levels = [0.382, 0.5, 1.382, 1.5];
      levels.forEach(level => {
        let y = map(swingLow + range * level, 3.41, 3.37, 50, 250);
        line(50, y, 350, y);
        noStroke();
        fill(255); // Bright white text
        text(`${(level * 100).toFixed(0)}%`, 360, y + 5);
      });

      // Add trend lines with thicker lines
      strokeWeight(2);
      stroke(255, 0, 0); // Bright red
      line(50, map(3.394, 3.41, 3.37, 50, 250), 350, map(3.405, 3.41, 3.37, 50, 250));
      stroke(255, 255, 0); // Bright yellow
      line(50, map(3.378, 3.41, 3.37, 50, 250), 350, map(3.392, 3.41, 3.37, 50, 250));

      // Add probability and zone labels with larger text
      noStroke();
      fill(255); // Bright white
      textSize(14);
      text("Probability of a Peak 13%", 10, 20); // Top left
      text("Probability of a Bottom 5%", 10, 280); // Bottom left
      text("Perfect Sell Zone 0.382-0.5", 10, 150); // Middle left
      text("Perfect Buy Zone 1.382-1.5", 10, 100); // Above sell zone
      text("Confidence: 27.3% (FAIR)", 10, 160); // For Sell Zone
      text("Confidence: 100% (EXCELLENT)", 10, 110); // For Buy Zone
    }
  </script>